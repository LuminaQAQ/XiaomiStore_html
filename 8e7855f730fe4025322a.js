import"../css/default.scss";import"../css/header.scss";import"../css/nav.scss";import"../css/footer.scss";import"../css/index.scss";import"../css/swiper.scss";import{fetchData}from"../api/fetchDropdown.js";import{fetchSwiperData}from"../api/fetchSwiperData";import{fetchApplianceData}from"../api/fetchCategory";import{fetchRecommendData}from"../api/fetchRecommendData";import{fetchReviewData}from"../api/fetchReviewData";var headerDropdown={headerContainer:document.querySelector(".header-wrap-center"),item:document.querySelectorAll(".has-dropdown"),board:document.querySelector(".dropdown-board"),data:[],open:function(){for(var e=this,t=this,i=["xiaomi","redmi"],n=function(n){e.item[n].addEventListener("mouseover",(function(e){t.board.innerHTML="",t.board.className="dropdown-board open",t.data=fetchData(i[n]),t.data.forEach((function(e){var i='\n                        <div id="has-dropdown" class="sg-dropdown-item">\n                            <header id="has-dropdown" class="item-img">\n                                <img id="has-dropdown" src="'.concat(e.src,'" alt="">\n                            </header>\n                            <section id="has-dropdown" class="item-title">\n                                ').concat(e.title,'\n                            </section>\n                            <section id="has-dropdown" class="item-price">\n                                ').concat(e.price,"\n                            </section>\n                        </div>\n                    ");t.board.innerHTML+=i}))}))},a=0;a<this.item.length;a++)n(a)},close:function(){var e=this;document.body.addEventListener("mousemove",(function(t){"has-dropdown"!==t.target.id&&(e.board.className="dropdown-board")}))},init:function(){this.open(),this.close()}};headerDropdown.init();var searchPlacehoder={input:document.querySelector("#search-input"),index:0,placeholderArr:["红米","小米手环8","耳机","洗衣机","冰箱","电视","手表"],changePlaceholder:function(e){this.input.setAttribute("placeholder",e)},init:function(){var e=this;setInterval((function(){e.changePlaceholder(e.placeholderArr[e.index]),++e.index==e.placeholderArr.length&&(e.index=0)}),5e3)}};searchPlacehoder.init();var swiperOpt={wrap:document.querySelector(".swiper-wrap-right"),swiperWrap:document.querySelector(".swiper"),circleWrap:document.querySelector(".circle-wrap"),prevBtn:document.querySelector(".change-swiper-btn.prev"),nextBtn:document.querySelector(".change-swiper-btn.next"),curSwiper:0,swiperData:fetchSwiperData(),timer:null,handleSwiperChange:function(){for(var e=document.querySelectorAll(".sg-swiper-img-item"),t=document.querySelectorAll(".sg-cirlce"),i=0;i<e.length;i++)e[i].style.opacity=0,t[i].className="sg-cirlce";this.curSwiper>=e.length&&(this.curSwiper=0),this.curSwiper<0&&(this.curSwiper=this.swiperData.length-1),e[this.curSwiper].style.opacity=1,t[this.curSwiper].className="sg-cirlce active"},swiperInit:function(e){var t=this,i=this;this.timer=setInterval((function(){i.curSwiper++,t.handleSwiperChange()}),e),this.wrap.addEventListener("mouseover",(function(){clearInterval(i.timer),i.timer=null})),this.wrap.addEventListener("mouseleave",(function(){i.timer=setInterval((function(){i.curSwiper++,i.handleSwiperChange()}),e)}))},circlesInit:function(e){var t=this;this.circleWrap.innerHTML="";for(var i=0;i<this.swiperData.length;i++)this.circleWrap.innerHTML+='\n                <div class="sg-cirlce"></div>\n            ';var n=document.querySelectorAll(".sg-cirlce");n[this.curSwiper].className="sg-cirlce active";for(var a=function(i){n[i].addEventListener("click",(function(){t.curSwiper=i,clearInterval(t.timer),t.handleSwiperChange(),t.timer=setTimeout((function(){t.handleSwiperChange()}),e)}))},c=0;c<n.length;c++)a(c)},nextPrevInit:function(e){var t=this;this.prevBtn.addEventListener("click",(function(){t.curSwiper--,clearInterval(t.timer),t.handleSwiperChange()})),this.nextBtn.addEventListener("click",(function(){t.curSwiper++,t.timer=setInterval((function(){t.handleSwiperChange()}),e),t.handleSwiperChange()}))},setData:function(){var e=this;this.swiperWrap.innerHTML="",this.swiperData.forEach((function(t){var i='\n                <div class="sg-swiper-img-item">\n                    <img src="'.concat(t.src,'" alt="">\n                </div>\n            ');e.swiperWrap.innerHTML+=i}))},optInit:function(e){this.setData(),this.swiperInit(e),this.nextPrevInit(e),this.circlesInit(e)},init:function(){this.optInit(4e3)}};swiperOpt.init();var sideCollapse={boards:document.querySelectorAll(".item-sider-collapse-board"),setData:function(){for(var e=this,t=[{src:"https://cdn.cnbj1.fds.api.mi-img.com/mi-mall/b656495821144d92bd932d91eedcf659.png?width=80&height=80",text:"Redmi X65 2022款"},{src:"https://cdn.cnbj1.fds.api.mi-img.com/mi-mall/b656495821144d92bd932d91eedcf659.png?width=80&height=80",text:"Redmi X65 2022款"},{src:"https://cdn.cnbj1.fds.api.mi-img.com/mi-mall/943995e8d1b1a884e123aec25cc1f8b8.png?width=80&height=80",text:"小米拍拍4K高清投屏器"},{src:"https://cdn.cnbj1.fds.api.mi-img.com/mi-mall/b656495821144d92bd932d91eedcf659.png?width=80&height=80",text:"Redmi X55 2022款"},{src:"https://cdn.cnbj1.fds.api.mi-img.com/mi-mall/50194366cfebbc7c82489d0094c1f944.png?width=80&height=80",text:"小米电视6 55”  OLED"},{src:"https://cdn.cnbj1.fds.api.mi-img.com/mi-mall/50194366cfebbc7c82489d0094c1f944.png?width=80&height=80",text:"小米电视6 65”  OLED"},{src:"https://cdn.cnbj1.fds.api.mi-img.com/mi-mall/b91c9ef670fa1c12eddf23b209f9ff33.png?width=80&height=80",text:"小米电视 大师  77”  OLED"},{src:"https://cdn.cnbj1.fds.api.mi-img.com/mi-mall/aa3954f817a23443c0b6b523ebbd09f6.png?width=80&height=80",text:"小米电视6 至尊版 55英寸"},{src:"https://cdn.cnbj1.fds.api.mi-img.com/mi-mall/aa3954f817a23443c0b6b523ebbd09f6.png?width=80&height=80",text:"小米电视6 至尊版 65英寸"},{src:"https://cdn.cnbj1.fds.api.mi-img.com/mi-mall/aa3954f817a23443c0b6b523ebbd09f6.png?width=80&height=80",text:"小米电视6 至尊版 75英寸"},{src:"https://cdn.cnbj1.fds.api.mi-img.com/mi-mall/1c0d83dd59a3dd91372d867864b35554.png?width=80&height=80",text:"小米电视 ES43 2022款"},{src:"https://cdn.cnbj1.fds.api.mi-img.com/mi-mall/1c0d83dd59a3dd91372d867864b35554.png?width=80&height=80",text:"小米电视 ES55 2022款"},{src:"https://cdn.cnbj1.fds.api.mi-img.com/mi-mall/1c0d83dd59a3dd91372d867864b35554.png?width=80&height=80",text:"小米电视 ES65 2022款"},{src:"https://cdn.cnbj1.fds.api.mi-img.com/mi-mall/1c0d83dd59a3dd91372d867864b35554.png?width=80&height=80",text:"小米电视 ES75 2022款"},{src:"https://cdn.cnbj1.fds.api.mi-img.com/mi-mall/d219d8b9c4a74eda4ae6c0222d194cd2.png?width=80&height=80",text:"金属全面屏电视"},{src:"https://cdn.cnbj1.fds.api.mi-img.com/mi-mall/7da49e7ada2229c963c9c7353a58d49b.png?width=80&height=80",text:"大师电视 65英寸 OLED"},{src:"https://cdn.cnbj1.fds.api.mi-img.com/mi-mall/1df560d16cc983b0f34d24fc484bd697.png?width=80&height=80",text:"小米电视4A 60英寸"},{src:"https://cdn.cnbj1.fds.api.mi-img.com/mi-mall/070b329c18c1ab167df2a42564a67813.png?width=80&height=80",text:"Redmi 智能电视 X55"},{src:"https://cdn.cnbj0.fds.api.mi-img.com/b2c-mimall-media/8aeae36f5d088f22c84b8953bd0d08b4.jpg?width=80&height=80",text:"小米全面屏电视"},{src:"https://cdn.cnbj1.fds.api.mi-img.com/mi-mall/ce75f4a3fef148b6729061a18f994aa7.png?width=80&height=80",text:"米家激光投影仪"},{src:"https://cdn.cnbj1.fds.api.mi-img.com/mi-mall/9d649ec3d7d14da7090e396d56b7cc92.jpg?width=80&height=80",text:'Redmi 智能电视 MAX 98"'},{src:"https://cdn.cnbj1.fds.api.mi-img.com/mi-mall/3fbb9ad7c67775fcc1a10219bdbd7257.png?width=80&height=80",text:"小米电视5 75英寸"},{src:"https://cdn.cnbj1.fds.api.mi-img.com/mi-mall/6797917392e912577135d9eb8ad92f1f.png?width=80&height=80",text:"小米电视4A 70英寸"},{src:"https://cdn.cnbj1.fds.api.mi-img.com/mi-mall/8cb5791161d8b25897f60385f0ec7ab2.png?width=80&height=80",text:"小米电视4S 75英寸"}],i=function(){var i="";t.forEach((function(e){var t='\n                <div class="sg-goods-list-item">\n                    <section class="item-img">\n                        <img src="'.concat(e.src,'"\n                            alt="">\n                    </section>\n                    <section class="item-title">').concat(e.text,"</section>\n                </div>");i+=t})),e.boards[n].innerHTML=i},n=0;n<this.boards.length;n++)i()},init:function(){this.setData()}};sideCollapse.init();var timeLimit={timeWrap:document.querySelector(".time-wrap"),format:function(e){return e<=9?"0"+e:e},divideSegment:function(e){return{tens:(e=String(e))[0],ones:e[1]}},setData:function(e){var t='\n            <section class="hour">\n                <div class="tens-place">'.concat(e.hour.tens,'</div>\n                <div class="ones-place">').concat(e.hour.ones,'</div>\n            </section>\n            <section class="time-divide">:</section>\n            <section class="minute">\n                <div class="tens-place">').concat(e.minute.tens,'</div>\n                <div class="ones-place">').concat(e.minute.ones,'</div>\n            </section>\n            <section class="time-divide">:</section>\n            <section class="second">\n                <div class="tens-place">').concat(e.second.tens,'</div>\n                <div class="ones-place">').concat(e.second.ones,"</div>\n            </section>\n        ");this.timeWrap.innerHTML=t},initTimer:function(){var e=this,t=(new Date).getDate(),i=new Date;i.setDate(t+1),i.setHours(0),i.setMinutes(0),i.setSeconds(0),setInterval((function(){var t=new Date,n=new Date(i-t),a=e.divideSegment(e.format(n.getHours())),c=e.divideSegment(e.format(n.getMinutes())),s=e.divideSegment(e.format(n.getSeconds()));e.setData({hour:a,minute:c,second:s})}),1e3)},init:function(){this.initTimer()}};timeLimit.init();var spacialCategory={tabs:document.querySelectorAll(".appliances-tab"),cateWrap:document.querySelector(".appliances-wrap").querySelector(".row"),getData:function(){return fetchApplianceData()},setData:function(e){var t=this,i=this.getData()[e||"hot"];this.cateWrap.innerHTML="",i.forEach((function(e){var i='\n            <section class="row-item">\n                <section class="new-tag">新品</section>\n                <section class="item-img">\n                    <img src="'.concat(e.imgSrc,'" alt="">\n                </section>\n                <div class="item-info">\n                    <span class="name">').concat(e.title,'</span>\n                    <span class="desc">').concat(e.desc,'</span>\n                    <span class="price">\n                        <span class="num">').concat(e.num+"元",'</span>\n                        <del></del><span class="origin-num">').concat(e.originPrice?e.originPrice+"元":"","</span><del>\n                    </span>\n                </div>\n            </section>\n            ");t.cateWrap.innerHTML+=i}))},init:function(){var e=this;this.setData();for(var t=["hot","tv","computer","home"],i=0;i<this.tabs.length;i++)this.tabs[i].index=i,this.tabs[i].key=t[i],this.tabs[i].addEventListener("mouseover",(function(t){for(var i=0;i<e.tabs.length;i++)e.tabs[i].className="sg-tab-item appliances-tab";e.tabs[this.index].className="sg-tab-item appliances-tab active",e.setData(this.key)}));this.tabs[0].className="sg-tab-item appliances-tab active"}};spacialCategory.init();var recommendSystem={wrap:document.querySelector(".recommend-list").querySelector(".sg-cate-goods-item"),pageSize:2,pageCur:0,aPageWidth:1226,prev:document.querySelector(".main-recommend-wrap").querySelector(".prev"),next:document.querySelector(".main-recommend-wrap").querySelector(".next"),initChangePage:function(){var e=this;this.prev.addEventListener("click",(function(){e.pageCur<=0?e.prev.className="sg-tab-item recommend-arrow prev disable":(e.pageCur--,e.pageCur<=0?e.prev.className="sg-tab-item recommend-arrow prev disable":e.prev.className="sg-tab-item recommend-arrow next",e.next.className="sg-tab-item recommend-arrow next",e.wrap.style.transform="translate(".concat(e.pageCur*-e.aPageWidth,"px)"))})),this.next.addEventListener("click",(function(){e.pageCur>=e.pageSize?e.next.className="sg-tab-item recommend-arrow next disable":(e.pageCur++,e.pageCur>=e.pageSize?e.next.className="sg-tab-item recommend-arrow next disable":e.prev.className="sg-tab-item recommend-arrow prev",e.wrap.style.transform="translate(".concat(e.pageCur*-e.aPageWidth,"px)"))}))},setData:function(){var e=this,t=fetchRecommendData();this.wrap.innerHTML="",t.forEach((function(t){var i='\n                <section class="row-item">\n                    <section class="item-img">\n                        <img src="'.concat(t.imgSrc,'" alt="">\n                    </section>\n                    <div class="item-info">\n                        <span class="name">').concat(t.title,'</span>\n                        <span class="price">\n                            <span class="num">').concat(t.price,"</span>\n                        </span>\n                    </div>\n                </section>\n            ");e.wrap.innerHTML+=i}))},init:function(){this.setData(),this.initChangePage()}};recommendSystem.init();var reviewProduct={wrap:document.querySelector(".comment-list .sg-cate-goods-item"),setData:function(){var e=this,t=fetchReviewData();this.wrap.innerHTML="",t.forEach((function(t){var i='\n                <section class="row-item">\n                    <section class="item-img">\n                        <img src="'.concat(t.imgSrc,'" alt="">\n                    </section>\n                    <div class="item-info">\n                        <span class="comment">').concat(t.comment,'</span>\n                        <span class="desc">').concat(t.author,'</span>\n\n                        <div class="product-info">\n                            <span class="name">').concat(t.goods,'</span> \n                            <span class="desc">|</span>\n                            <span class="price">\n                                <span class="num">').concat(t.price,"</span>\n                            </span>\n                        </div>\n                    </div>\n                </section>\n            ");e.wrap.innerHTML+=i}))},init:function(){this.setData()}};reviewProduct.init();